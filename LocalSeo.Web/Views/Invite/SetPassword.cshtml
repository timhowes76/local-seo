@model InviteSetPasswordViewModel
@{
    ViewData["Title"] = "Set Password";
}

<div class="login-card card">
    <div class="login-brand">
        <img class="login-brand-logo" src="/assets/images/logo.svg" alt="Kontrolit" />
        <h2 class="card-title">Set Password</h2>
    </div>

    @if (!string.IsNullOrWhiteSpace(Model.Message))
    {
        <div class="notice">@Model.Message</div>
    }

    <p class="muted">Create your password for <strong>@Model.EmailAddressMasked</strong>.</p>

    <form method="post" action="/invite/set-password" class="form-grid">
        @Html.AntiForgeryToken()
        <input type="hidden" name="Token" value="@Model.Token" />
        <div class="form-row">
            <label for="invite-new-password">New password</label>
            @await Html.PartialAsync("_PasswordInput", new PasswordInputModel
            {
                Id = "invite-new-password",
                Name = "NewPassword",
                Autocomplete = "new-password",
                Required = true
            })
        </div>
        <div class="form-row">
            <label for="invite-confirm-password">Confirm password</label>
            @await Html.PartialAsync("_PasswordInput", new PasswordInputModel
            {
                Id = "invite-confirm-password",
                Name = "ConfirmPassword",
                Autocomplete = "new-password",
                Required = true
            })
        </div>
        <div class="form-row">
            <p class="form-help">Password requirements:</p>
            <ul class="form-help password-requirements">
                <li>At least @Model.PasswordPolicy.MinimumPasswordLength characters</li>
                @if (Model.PasswordPolicy.RequiresNumber)
                {
                    <li>At least one number</li>
                }
                @if (Model.PasswordPolicy.RequiresCapitalLetter)
                {
                    <li>At least one capital letter</li>
                }
                @if (Model.PasswordPolicy.RequiresSpecialCharacter)
                {
                    <li>At least one special character</li>
                }
            </ul>
        </div>
        <div class="form-row">
            <label class="inline-group" for="invite-use-gravatar">
                <input id="invite-use-gravatar" name="UseGravatar" type="checkbox" value="true" @(Model.UseGravatar ? "checked" : null) />
                <span>Use Gravatar for my avatar (optional)</span>
            </label>
            <p class="form-help">Gravatar is a third-party avatar service and may receive an email hash and your IP address when loading your avatar.</p>
        </div>
        <div class="login-actions">
            <button type="submit">Set Password</button>
        </div>
    </form>
</div>
